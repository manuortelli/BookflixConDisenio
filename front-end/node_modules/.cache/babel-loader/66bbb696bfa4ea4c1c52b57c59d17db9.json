{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bookflix\\\\BookflixConDisenio\\\\front-end\\\\src\\\\components\\\\VistaAdmin\\\\Generos\\\\GeneroCRUD.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport NavegacionAdmin from '../NavegacionAdmin';\nconst generos = 'http://localhost:4000/api/generos/';\nconst cargar = 'http://localhost:4000/api/generos/cargar';\nconst borrar = 'http://localhost:4000/api/generos/eliminar/';\nconst modificar = 'http://localhost:4000/api/generos/modificar/';\n\nclass Generos extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleChange2 = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.agregarGenero = async e => {\n      e.preventDefault();\n\n      if (generos.indexOf(this.state.nombre) > -1) {\n        return alert('El género ya fue cargado anteriormente');\n      }\n\n      ;\n      await axios.post(cargar, {\n        nombre: this.state.nombre\n      }, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        alert(JSON.stringify(res.data));\n        this.getData();\n      }).catch(err => {\n        alert(JSON.stringify(err.data));\n      });\n    };\n\n    this.onInputChange2 = e => {\n      this.setState({\n        id: e.target.value\n      });\n    };\n\n    this.eliminarGenero = async e => {\n      e.preventDefault();\n      await axios.post(borrar, {\n        id: this.state.id\n      }, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.getData();\n        alert(JSON.stringify(res.data));\n      }).catch(err => {\n        alert(JSON.stringify(err.response.data.msg));\n      });\n    };\n\n    this.onInputChange3 = e => {\n      this.setState({\n        id: e.target.value\n      });\n    };\n\n    this.modificarGenero = async e => {\n      e.preventDefault();\n      await axios.post(modificar, {\n        id: this.state.id,\n        nombre: this.state.nombre2\n      }, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.getData();\n        alert(JSON.stringify(res.data));\n      }).catch(err => {\n        alert(JSON.stringify(err.data));\n      });\n    };\n\n    this.state = {\n      user: JSON.parse(sessionStorage.getItem('user')),\n      token: sessionStorage.getItem('token'),\n      generos: [],\n      nombre: '',\n      nombre2: '',\n      id: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.agregarGenero = this.agregarGenero.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n  }\n\n  async getData() {\n    await axios.get(generos, {\n      headers: {\n        'xaccess': this.state.token\n      }\n    }).then(res => {\n      this.setState({\n        generos: res.data\n      });\n    }).catch(err => {\n      alert(err);\n    });\n  }\n\n  async componentDidMount() {\n    await this.getData();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavegacionAdmin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-autor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-input-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.agregarGenero,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardEditorial offset-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, \"Agregar g\\xE9nero\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 29\n      }\n    }, \"Ingrese el g\\xE9nero\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control col s12\",\n      id: \"nombre\",\n      name: \"nombre\",\n      value: this.state.nombre,\n      onChange: this.handleChange,\n      placeholder: \"Ingrese g\\xE9nero\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-success float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 33\n      }\n    }, \" Agregar G\\xE9nero \"))))), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.eliminarGenero,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardEliminarAutor offset-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, \"Eliminar g\\xE9nero\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange2,\n      id: \"exampleFormControlSelect1\",\n      name: \"editorial\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    }, \"Seleccione un g\\xE9nero para eliminar\"), this.state.generos.map(ge => /*#__PURE__*/React.createElement(\"option\", {\n      key: ge.id,\n      value: ge._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 37\n      }\n    }, ge.nombre)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-success float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, \" Eliminar G\\xE9nero \")))), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.modificarGenero,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardEditarEditorial offset-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, \"Modificar G\\xE9nero\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      required: true,\n      className: \"form-control\",\n      onChange: this.onInputChange3,\n      id: \"exampleFormControlSelect1\",\n      name: \"editorial\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 29\n      }\n    }, \"Seleccione un g\\xE9nero para modificar\"), this.state.generos.map(ge => /*#__PURE__*/React.createElement(\"option\", {\n      key: ge.id,\n      value: ge._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 37\n      }\n    }, ge.nombre))), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 29\n      }\n    }, \"Ingrese el nuevo g\\xE9nero\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control col s12\",\n      id: \"nombre2\",\n      name: \"nombre2\",\n      value: this.state.nombre2,\n      onChange: this.handleChange2,\n      required: true,\n      placeholder: \"Ingrese el nuevo g\\xE9nero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col s12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-success float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 29\n      }\n    }, \"Actualizar G\\xE9nero\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, this.state.generos.map(ge => /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card col-md-10 offset-md-5 text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      class: \"card-title\",\n      onChange: this.onInputChange2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 33\n      }\n    }, ge.nombre)))))));\n  }\n\n}\n\nexport default Generos;","map":{"version":3,"sources":["D:/Documentos/GitHub/bookflix/BookflixConDisenio/front-end/src/components/VistaAdmin/Generos/GeneroCRUD.js"],"names":["React","Component","axios","NavegacionAdmin","generos","cargar","borrar","modificar","Generos","constructor","handleChange","e","setState","target","name","value","handleChange2","onInputChange","agregarGenero","preventDefault","indexOf","state","nombre","alert","post","headers","token","then","res","JSON","stringify","data","getData","catch","err","onInputChange2","id","eliminarGenero","response","msg","onInputChange3","modificarGenero","nombre2","user","parse","sessionStorage","getItem","bind","get","componentDidMount","render","map","ge","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport NavegacionAdmin from '../NavegacionAdmin'\r\n\r\nconst generos = 'http://localhost:4000/api/generos/';\r\nconst cargar = 'http://localhost:4000/api/generos/cargar';\r\nconst borrar = 'http://localhost:4000/api/generos/eliminar/';\r\nconst modificar = 'http://localhost:4000/api/generos/modificar/';\r\n\r\n\r\nclass Generos extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            user: JSON.parse(sessionStorage.getItem('user')),\r\n            token: sessionStorage.getItem('token'),\r\n            \r\n            generos: [],\r\n            nombre: '',\r\n            nombre2:'',\r\n            id: ''\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.agregarGenero = this.agregarGenero.bind(this);\r\n        this.onInputChange = this.onInputChange.bind(this);\r\n        \r\n\r\n    }\r\n    async getData() {\r\n        await axios.get(generos, \r\n            { headers: { 'xaccess': this.state.token }\r\n        })\r\n            .then(res => {\r\n                this.setState({\r\n                    generos: res.data\r\n                });\r\n            })\r\n            .catch(err => {\r\n                alert(err)\r\n            });\r\n\r\n    }\r\n    async componentDidMount() {\r\n        await this.getData();\r\n    };\r\n    \r\n    handleChange= (e) => {\r\n        \r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        }\r\n\r\n        );\r\n    }\r\n    handleChange2= (e) => {\r\n        \r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        }\r\n\r\n        );\r\n    }\r\n    \r\n\r\n    onInputChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    };\r\n\r\n    agregarGenero = async (e) => {\r\n        e.preventDefault();\r\n        if(generos.indexOf(this.state.nombre) > -1){\r\n            return alert('El género ya fue cargado anteriormente')\r\n        };\r\n        await axios.post(cargar,\r\n            { nombre: this.state.nombre },\r\n            { headers: { 'xaccess': this.state.token } }\r\n\r\n        ).then(res => {\r\n            alert(JSON.stringify(res.data));\r\n            \r\n            this.getData()\r\n        })\r\n\r\n        .catch(err => {\r\n            alert(JSON.stringify(err.data))\r\n        } );\r\n\r\n    };\r\n\r\n    onInputChange2 = (e) => {\r\n       this.setState({\r\n            id: e.target.value\r\n        });\r\n    };\r\n\r\n    eliminarGenero = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await axios.post(borrar ,\r\n            { id: this.state.id },\r\n            { headers: { 'xaccess': this.state.token } }\r\n\r\n        ).then(res => {\r\n            this.getData();\r\n            alert(JSON.stringify(res.data));\r\n        })\r\n        .catch(err => {\r\n            alert(JSON.stringify(err.response.data.msg))\r\n        });\r\n    };\r\n\r\n    onInputChange3 = (e) => {\r\n        this.setState({\r\n            id: e.target.value\r\n        });\r\n    };\r\n\r\n    modificarGenero = async (e) => {\r\n        e.preventDefault();\r\n\r\n        await axios.post(modificar,\r\n            { id: this.state.id,\r\n            nombre: this.state.nombre2 },\r\n            { headers: { 'xaccess': this.state.token } }\r\n\r\n        ).then(res => {\r\n            this.getData();\r\n            alert(JSON.stringify(res.data));\r\n        })\r\n        .catch(err => {\r\n            alert(JSON.stringify(err.data))\r\n        });\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div><NavegacionAdmin/>\r\n            \r\n            <div className=\"row\">\r\n                \r\n                <div className=\"form-autor\" >\r\n                <div className=\"form-input-field\">\r\n                    <form onSubmit={this.agregarGenero} >\r\n\r\n\r\n                    <div className=\"cardEditorial offset-md-1\">\r\n                    <div className=\"card-header\">\r\n\t\t\t\t            <h5>Agregar género</h5>\r\n                            </div>\r\n\r\n                            <div className=\"card-body\">   \r\n                            <label className=\"text-light\">Ingrese el género</label>\r\n                                <input \r\n                                    className=\"form-control col s12\"\r\n                                    id=\"nombre\"\r\n                                    name=\"nombre\"\r\n                                    value={this.state.nombre}\r\n                                    onChange={this.handleChange}\r\n                                    placeholder=\"Ingrese género\"\r\n                                    required>\r\n                                </input>\r\n                                \r\n                            </div>\r\n                            <div className=\"form-group col s12\">\r\n                                <button type=\"submit\" className=\"btn btn-success float-right\" > Agregar Género </button>\r\n                                </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n               \r\n\r\n        \r\n                    <form onSubmit={this.eliminarGenero}>\r\n                    <div className=\"cardEliminarAutor offset-md-1\">\r\n                        <div className=\"card-header\">\r\n\t\t\t\t            <h5>Eliminar género</h5>\r\n                            </div> \r\n                            <div className=\"card-body\">\r\n                            <select className=\"form-control\" onChange={this.onInputChange2} id=\"exampleFormControlSelect1\" name=\"editorial\">\r\n                            <option selected>Seleccione un género para eliminar</option>\r\n                                {this.state.generos.map(ge =>\r\n                                    <option key={ge.id} value={ge._id} >{ge.nombre}</option>\r\n                                )}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"form-group col s12\">\r\n                            <button type=\"submit\" className=\"btn btn-success float-right\" > Eliminar Género </button>\r\n                        \r\n                            </div>\r\n                            </div>\r\n                    </form>\r\n               \r\n                \r\n\r\n\r\n                \r\n               \r\n                    <form onSubmit={this.modificarGenero}>\r\n\r\n                    <div className=\"cardEditarEditorial offset-md-1\">\r\n                        <div className=\"card-header\">\r\n                        <h5>Modificar Género</h5>\r\n                            </div>\r\n                            <div className=\"card-body\"> \r\n                            <select required className=\"form-control\" onChange={this.onInputChange3} id=\"exampleFormControlSelect1\" name=\"editorial\">\r\n                            <option selected>Seleccione un género para modificar</option>\r\n                                {this.state.generos.map(ge =>\r\n                                    <option key={ge.id} value={ge._id} >{ge.nombre}</option>\r\n                                )}\r\n                            </select>\r\n                            <label className=\"text-light\">Ingrese el nuevo género</label>\r\n                            <input\r\n                                className=\"form-control col s12\"\r\n                                id=\"nombre2\"\r\n                                name=\"nombre2\"\r\n                                value={this.state.nombre2}\r\n                                onChange={this.handleChange2}\r\n                                required\r\n                                placeholder=\"Ingrese el nuevo género\">\r\n                            </input>\r\n                        </div>\r\n\r\n\r\n\r\n                        <div className=\"form-group col s12 \">\r\n                            <button type=\"submit\" className=\"btn btn-success float-right\" >\r\n                                Actualizar Género\r\n                            </button>\r\n                        </div>\r\n                        </div>\r\n\r\n                    </form>\r\n                </div>\r\n                \r\n                \r\n\r\n                <div className=\"col-md-4\">\r\n                    {this.state.generos.map(ge =>\r\n                        <div class=\"card col-md-10 offset-md-5 text-light bg-dark\" >\r\n                            <div class=\"card-body\">\r\n                    \r\n                                <h5 class=\"card-title\" onChange={this.onInputChange2} >{ge.nombre}</h5>\r\n                    \r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Generos;"]},"metadata":{},"sourceType":"module"}