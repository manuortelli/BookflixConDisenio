{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jhon\\\\Desktop\\\\proyectos-IS1\\\\version4.0\\\\bf\\\\front-end\\\\src\\\\components\\\\HomePerfiles.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport ItemPerfil from \"./ItemPerfil\";\nimport { Link } from \"react-router-dom\";\nimport HomeSuscriptor from \"./VistaSuscriptor/HomeSuscriptor\"; //Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\n\nconst perfilesApi = \"http://localhost:4000/api/suscriptores/loginPerfiles\";\nconst loginPerfilApi = \"http://localhost:4000/api/suscriptores/loginPerfil\";\n\nclass ListarPerfiles extends Component {\n  constructor() {\n    super();\n\n    this.irAHomeDePerfil = async (event, idllega) => {\n      console.log(\"Esto tenes que mirar\", this.state.perfiles[0]);\n      await axios.post(loginPerfilApi, {\n        id: idllega\n      }, {\n        headers: {\n          xaccess: sessionStorage.getItem(\"token\")\n        }\n      }).then(res => {\n        console.log(res.data.user._id);\n        const {\n          user,\n          token\n        } = res.data;\n        sessionStorage.setItem(\"token\", token);\n        sessionStorage.setItem(\"perfilUser\", JSON.stringify(user));\n        sessionStorage.setItem(\"perfil\", res.data.user);\n        sessionStorage.setItem(\"perfilID\", user._id);\n        this.setState({\n          perfilselected: true\n        });\n      });\n      console.log(JSON.parse(sessionStorage.getItem(\"perfilUser\")));\n    };\n\n    this.state = {\n      token: sessionStorage.getItem(\"token\"),\n      suscripcion: JSON.parse(sessionStorage.getItem(\"user\")),\n      miPerfil: JSON.parse(sessionStorage.getItem(\"perfilUser\")),\n      perfiles: [],\n      perfilesNombre: [],\n      perfilselected: false\n    };\n  }\n\n  async componentDidMount() {\n    console.log(\"Esta es mi suscripción\", this.state.suscripcion);\n    var perfilesid = new Array(),\n        perfilesNombre1 = new Array();\n    await axios.get(perfilesApi, {\n      headers: {\n        xaccess: sessionStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      console.log(res.data);\n      res.data.map(info => {\n        {\n          console.log(info.id);\n          perfilesid.push(info.id);\n        }\n        {\n          perfilesNombre1.push(info.nombre);\n        }\n      });\n    });\n    this.setState({\n      perfiles: perfilesid,\n      perfilesNombre: perfilesNombre1\n    });\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfilesNombre[0]);\n    console.log(this.state.perfilesNombre);\n  }\n\n  render() {\n    return this.state.token === \"\" || this.state.perfilselected == false ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardPerfil col-md-6 offset-md-3 text-light bg-dark \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, \"Perfiles:\"), this.state.suscripcion.user.perfiles.map(perfil => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardListarPerfil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }, \" \", perfil.nombre, \" \"), \" \", /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-outline-danger itemBoton float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 52\n      }\n    }, \"Eliminar\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => {\n        this.irAHomeDePerfil(e, perfil.id);\n      },\n      className: \"btn btn-outline-danger itemBoton float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, \"Ingresar\")))) : /*#__PURE__*/React.createElement(HomeSuscriptor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default ListarPerfiles;","map":{"version":3,"sources":["C:/Users/Jhon/Desktop/proyectos-IS1/version4.0/bf/front-end/src/components/HomePerfiles.js"],"names":["React","Component","axios","Redirect","ItemPerfil","Link","HomeSuscriptor","perfilesApi","loginPerfilApi","ListarPerfiles","constructor","irAHomeDePerfil","event","idllega","console","log","state","perfiles","post","id","headers","xaccess","sessionStorage","getItem","then","res","data","user","_id","token","setItem","JSON","stringify","setState","perfilselected","parse","suscripcion","miPerfil","perfilesNombre","componentDidMount","perfilesid","Array","perfilesNombre1","get","map","info","push","nombre","render","perfil","e"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport ItemPerfil from \"./ItemPerfil\";\r\nimport { Link } from \"react-router-dom\";\r\nimport HomeSuscriptor from \"./VistaSuscriptor/HomeSuscriptor\";\r\n\r\n//Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\r\nconst perfilesApi = \"http://localhost:4000/api/suscriptores/loginPerfiles\";\r\nconst loginPerfilApi = \"http://localhost:4000/api/suscriptores/loginPerfil\";\r\n\r\nclass ListarPerfiles extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      token: sessionStorage.getItem(\"token\"),\r\n      suscripcion: JSON.parse(sessionStorage.getItem(\"user\")),\r\n      miPerfil:JSON.parse(sessionStorage.getItem(\"perfilUser\")),\r\n      perfiles: [],\r\n      perfilesNombre: [],\r\n      perfilselected: false,\r\n    };\r\n  }\r\n\r\n  irAHomeDePerfil = async (event, idllega) => {\r\n    console.log(\"Esto tenes que mirar\",this.state.perfiles[0]);\r\n    await axios\r\n      .post(\r\n        loginPerfilApi,\r\n        { id: idllega },\r\n        {\r\n          headers: { xaccess: sessionStorage.getItem(\"token\") },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data.user._id);\r\n\r\n        const { user, token } = res.data;\r\n        sessionStorage.setItem(\"token\", token);\r\n        sessionStorage.setItem(\"perfilUser\", JSON.stringify(user));\r\n        sessionStorage.setItem(\"perfil\", res.data.user);\r\n        sessionStorage.setItem(\"perfilID\", user._id);\r\n        this.setState({ perfilselected: true });\r\n      });\r\n      console.log(JSON.parse(sessionStorage.getItem(\"perfilUser\")))\r\n  };\r\n\r\n  async componentDidMount() {\r\n    console.log(\"Esta es mi suscripción\",this.state.suscripcion)\r\n    var perfilesid = new Array(),\r\n      perfilesNombre1 = new Array();\r\n    await axios\r\n      .get(perfilesApi, {\r\n        headers: { xaccess: sessionStorage.getItem(\"token\") },\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        res.data.map((info) => {\r\n          {\r\n            console.log(info.id);\r\n            perfilesid.push(info.id);\r\n          }\r\n          {\r\n            perfilesNombre1.push(info.nombre);\r\n          }\r\n        });\r\n      });\r\n\r\n    this.setState({\r\n      perfiles: perfilesid,\r\n      perfilesNombre: perfilesNombre1,\r\n    });\r\n    console.log(this.state.perfiles[0]);\r\n\r\n    console.log(this.state.perfiles[0]);\r\n    console.log(this.state.perfilesNombre[0]);\r\n    console.log(this.state.perfilesNombre);\r\n  }\r\n\r\n  render() {\r\n    return this.state.token === \"\" || this.state.perfilselected == false ? (\r\n        <div className=\"cardPerfil col-md-6 offset-md-3 text-light bg-dark \">\r\n          <h3 className=\"card-header\">Perfiles:</h3>\r\n          {this.state.suscripcion.user.perfiles.map(perfil =>\r\n                    <div className=\"cardListarPerfil\">\r\n                       \r\n                        <h5> {perfil.nombre} </h5> <Link className=\"btn btn-outline-danger itemBoton float-right\">Eliminar</Link>\r\n                        <button onClick={(e)=> {this.irAHomeDePerfil(e, perfil.id)}} className=\"btn btn-outline-danger itemBoton float-right\">Ingresar</button>\r\n                        \r\n                    </div>\r\n\r\n                )}\r\n            \r\n          \r\n          \r\n        \r\n      </div>\r\n    ) : (\r\n      <HomeSuscriptor></HomeSuscriptor>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ListarPerfiles;\r\n"]},"metadata":{},"sourceType":"module"}