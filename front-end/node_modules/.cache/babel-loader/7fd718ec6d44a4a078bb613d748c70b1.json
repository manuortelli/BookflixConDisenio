{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jhon\\\\Desktop\\\\proyectos-IS1\\\\version3.2\\\\BookflixConDisenio\\\\front-end\\\\src\\\\components\\\\VistaSuscriptor\\\\Libros\\\\Buscador.js\";\nimport React, { Component } from 'react';\nimport axios from '../../../../node_modules/axios';\nimport propTypes from 'prop-types';\nimport { set } from 'mongoose';\nimport { Link } from 'react-router-dom';\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport Slider from \"react-slick\";\nimport ItemListLibro from './ItemListLibro';\nimport ItemLIbroConPortada from './ItemLIbroConPortada';\nconst portada = 'http://localhost:4000/uploads/';\nconst autores = 'http://localhost:4000/api/autores/';\nconst generos = 'http://localhost:4000/api/generos/';\nconst editoriales = 'http://localhost:4000/api/editoriales/';\nconst libros = 'http://localhost:4000/api/libros/';\nexport default class Buscador extends Component {\n  constructor(props) {\n    super(props);\n\n    this.filtrarFechas = libros => {\n      var hoy = new Date();\n      console.log('hoy es:' + hoy);\n      var res = [];\n      libros.map(lib => {\n        if (lib.lanzamiento != null) {\n          var lan = new Date(lib.lanzamiento);\n\n          if (lan < hoy) {\n            if (lib.expiracion != null) {\n              var ven = new Date(lib.expiracion);\n\n              if (ven > hoy) {\n                res.push(lib);\n              }\n            } else {\n              res.push(lib);\n            }\n          }\n        }\n      });\n      return res;\n    };\n\n    this.getData = async () => {\n      await axios.get(libros, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setLibros(res.data);\n      }).catch();\n      await axios.get(autores, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setAutores(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      await axios.get(generos, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setGeneros(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      await axios.get(editoriales, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setEditoriales(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.loPuedoAgregar = libro => {\n      console.log(libro);\n      var puedo = true;\n\n      if (this.state.buscador != '') {\n        var resultado = libro.titulo.toLowerCase().indexOf(this.state.buscador.toLowerCase());\n\n        if (resultado != -1) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.autor != '') {\n        if (this.state.autor == libro.autor) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.genero != '') {\n        if (this.state.genero == libro.genero) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.editorial != '') {\n        if (this.state.editorial == libro.editorial) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      return puedo;\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      console.log(this.state.buscador);\n      console.log(this.state.genero);\n      console.log(this.state.editorial);\n      console.log(this.state.autor);\n      console.log(this.state.libros);\n      var lib = [];\n      this.state.libros.map(libro => {\n        console.log('entra en el map');\n\n        if (this.loPuedoAgregar(libro)) {\n          lib.push(libro);\n          console.log('entra');\n          console.log(this.loPuedoAgregar(libro));\n        }\n      });\n      this.setState({\n        librosConFiltro: lib\n      });\n\n      if (lib.length === 0) {\n        alert('no existen libros que coincidan con los filtros puestos');\n      }\n\n      console.log(this.state.librosConFiltro);\n      this.setLibrosConFiltro(lib);\n    };\n\n    this.limpiar = e => {\n      var copia = this.state.autores;\n      this.setState({\n        librosConFiltro: this.state.libros,\n        autor: '',\n        buscador: '',\n        editorial: '',\n        genero: '',\n        borrar: true\n      });\n      console.log('se esta limpiando');\n      this.render();\n    };\n\n    this.state = {\n      token: sessionStorage.getItem('token'),\n      buscador: '',\n      autor: '',\n      genero: '',\n      editorial: '',\n      libros: [],\n      autores: [],\n      generos: [],\n      editoriales: [],\n      librosConFiltro: [],\n      LibrosCarrousel: [],\n      borrar: false\n    };\n    this.loPuedoAgregar = this.loPuedoAgregar.bind(this);\n  }\n\n  setAutores(res) {\n    this.setState({\n      autores: res\n    });\n  }\n\n  setGeneros(res) {\n    this.setState({\n      generos: res\n    });\n  }\n\n  setEditoriales(res) {\n    this.setState({\n      editoriales: res\n    });\n  }\n\n  setLibros(res) {\n    console.log('lista de libros');\n    var re = this.filtrarFechas(res);\n    console.log(re);\n    this.setState({\n      libros: re\n    });\n    this.setLibrosConFiltro(re);\n  }\n\n  setLibrosConFiltro(res) {\n    var num = 2;\n    var aux = [];\n    var aux2 = [];\n    res.map(libro => {\n      if (aux.length < num) {\n        aux.push(libro);\n      } else {\n        aux.push(libro);\n        aux2.unshift(aux);\n        aux = [];\n      }\n\n      ;\n    });\n\n    if (aux != []) {\n      aux2.unshift(aux);\n    }\n\n    this.setState({\n      LibrosCarrousel: aux2\n    });\n  }\n\n  async componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const settings = {\n      dots: true,\n      infinite: true,\n      speed: 500,\n      slidesToShow: 3,\n      slidesToScroll: 1,\n      className: 'slides'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 offset-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"exampleFormControlInput1\",\n      name: \"buscador\",\n      onChange: this.onInputChange,\n      value: this.state.buscador,\n      placeholder: \"Buscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"autor\",\n      value: this.state.autor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 25\n      }\n    }, \"Autor/a\"), this.state.autores.map(autor => /*#__PURE__*/React.createElement(\"option\", {\n      key: autor._id,\n      value: autor._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 25\n      }\n    }, autor.nombre, \" \", autor.apellido)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: this.state.genero,\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"genero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 29\n      }\n    }, \"G\\xE9nero\"), this.state.generos.map(ge => /*#__PURE__*/React.createElement(\"option\", {\n      key: ge._id,\n      value: ge._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 33\n      }\n    }, ge.nombre)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"editorial\",\n      value: this.state.editorial,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 29\n      }\n    }, \"Editorial\"), this.state.editoriales.map(ed => /*#__PURE__*/React.createElement(\"option\", {\n      key: ed.id,\n      value: ed._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 29\n      }\n    }, ed.nombre)))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-light itemBoton  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-search\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.limpiar,\n      className: \"btn btn-light itemBoton \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-backspace\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carrusel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 20\n      }\n    }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 23\n      }\n    }), this.state.librosConFiltro.map(libro => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-VerLibro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 34\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 34\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"imgBx\",\n      to: '/suscriptor/libros/' + libro._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 38\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: portada + libro.portada,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 42\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 38\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 42\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 46\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"titulo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 46\n      }\n    }, \" \", libro.titulo, \" \")))))))));\n  }\n\n}\n;","map":{"version":3,"sources":["C:/Users/Jhon/Desktop/proyectos-IS1/version3.2/BookflixConDisenio/front-end/src/components/VistaSuscriptor/Libros/Buscador.js"],"names":["React","Component","axios","propTypes","set","Link","Slider","ItemListLibro","ItemLIbroConPortada","portada","autores","generos","editoriales","libros","Buscador","constructor","props","filtrarFechas","hoy","Date","console","log","res","map","lib","lanzamiento","lan","expiracion","ven","push","getData","get","headers","state","token","then","setLibros","data","catch","setAutores","err","setGeneros","setEditoriales","onInputChange","e","setState","target","name","value","loPuedoAgregar","libro","puedo","buscador","resultado","titulo","toLowerCase","indexOf","autor","genero","editorial","onSubmit","preventDefault","librosConFiltro","length","alert","setLibrosConFiltro","limpiar","copia","borrar","render","sessionStorage","getItem","LibrosCarrousel","bind","re","num","aux","aux2","unshift","componentDidMount","settings","dots","infinite","speed","slidesToShow","slidesToScroll","className","_id","nombre","apellido","ge","ed","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from '../../../../node_modules/axios';\r\n\r\nimport propTypes   from 'prop-types';\r\nimport { set } from 'mongoose';\r\nimport { Link } from 'react-router-dom';\r\nimport \"slick-carousel/slick/slick.css\"; \r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Slider from \"react-slick\";\r\nimport ItemListLibro from './ItemListLibro';\r\nimport ItemLIbroConPortada from './ItemLIbroConPortada';\r\n\r\nconst portada = 'http://localhost:4000/uploads/';\r\nconst autores = 'http://localhost:4000/api/autores/';\r\nconst generos = 'http://localhost:4000/api/generos/';\r\nconst editoriales = 'http://localhost:4000/api/editoriales/';\r\nconst libros='http://localhost:4000/api/libros/';\r\n\r\nexport default class Buscador extends Component {\r\n\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            token: sessionStorage.getItem('token'),\r\n            \r\n            buscador:'',\r\n            autor:'',\r\n            genero:'',\r\n            editorial:'',\r\n\r\n            libros:[],\r\n            autores:[],\r\n            generos:[],\r\n            editoriales:[],\r\n\r\n            librosConFiltro:[],\r\n            LibrosCarrousel:[],\r\n            borrar:false,\r\n            \r\n        }\r\n        this.loPuedoAgregar=this.loPuedoAgregar.bind(this);\r\n\r\n    }\r\n    setAutores(res){\r\n      \r\n        this.setState({\r\n            autores:res\r\n        });\r\n    }\r\n    setGeneros(res){\r\n        this.setState({\r\n            generos:res\r\n        });\r\n    }\r\n    \r\n    setEditoriales(res){   \r\n        this.setState({\r\n            editoriales:res\r\n        });\r\n       \r\n    }\r\n    \r\n\r\n    filtrarFechas=(libros)=>{\r\n        var hoy =new Date();\r\n        console.log('hoy es:'+ hoy );\r\n        var res=[];\r\n        libros.map( lib =>{\r\n            if(lib.lanzamiento != null ){\r\n                var lan= new Date(lib.lanzamiento);\r\n                if(lan< hoy){\r\n                    if(lib.expiracion != null){\r\n                        var ven= new Date(lib.expiracion);\r\n                        if(ven > hoy){\r\n                          res.push(lib);\r\n                        }\r\n                    }else{\r\n                        res.push(lib);\r\n                    }\r\n                 }\r\n            }\r\n           \r\n           \r\n\r\n        });\r\n        return res;\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    setLibros(res){\r\n        console.log('lista de libros');\r\n        var re =this.filtrarFechas(res);\r\n     \r\n        console.log(re);\r\n        this.setState({\r\n            libros:re,\r\n        });\r\n        this.setLibrosConFiltro(re);\r\n    }\r\n    setLibrosConFiltro(res){\r\n        var num =2;\r\n        var aux=[]; \r\n        var aux2=[];\r\n\r\n        res.map(libro=>{\r\n            if(aux.length< num){\r\n                aux.push(libro);\r\n            }else{\r\n                aux.push(libro);\r\n                aux2.unshift(aux);\r\n                aux=[] \r\n            };\r\n        })\r\n        if(aux!=[]){\r\n            aux2.unshift(aux);\r\n        }\r\n        this.setState({\r\n            \r\n            LibrosCarrousel:aux2,\r\n        });\r\n    }\r\n\r\n\r\n    getData = async () => {\r\n\r\n\r\n        await axios.get(libros,{\r\n           \r\n            headers:{'xaccess':this.state.token}  \r\n        })\r\n        .then(res =>{\r\n            this.setLibros(res.data)\r\n        })\r\n        .catch();\r\n\r\n        \r\n       \r\n        await axios.get(autores,{\r\n            \r\n            headers:{'xaccess':this.state.token}  \r\n        })\r\n        .then(res =>{\r\n            this.setAutores(res.data)\r\n        })\r\n        .catch(err =>{console.log(err)});\r\n\r\n        await axios.get(generos,{\r\n            \r\n            headers:{'xaccess':this.state.token}  \r\n        })\r\n        .then(res =>{\r\n            this.setGeneros(res.data)\r\n        })\r\n        .catch(err =>{console.log(err)});\r\n\r\n        await axios.get(editoriales,{\r\n            \r\n            headers:{'xaccess': this.state.token}  \r\n        })\r\n        .then(res =>{\r\n            this.setEditoriales(res.data)\r\n        })\r\n        .catch(err =>{console.log(err)});\r\n      \r\n    }\r\n\r\n    async componentDidMount(){\r\n        this.getData();\r\n      \r\n  \r\n    }\r\n\r\n    \r\n    onInputChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    };\r\n   \r\n    loPuedoAgregar=(libro)=>{\r\n        console.log(libro);\r\n        var puedo=true;\r\n\r\n        if(this.state.buscador!=''){\r\n\r\n           \r\n            var resultado = libro.titulo.toLowerCase().indexOf(this.state.buscador.toLowerCase());\r\n        \r\n            if(resultado != -1) {\r\n                puedo= true;\r\n            }else{\r\n                return false;\r\n            }\r\n        }\r\n\r\n\r\n        if(this.state.autor!=''){\r\n\r\n            if( this.state.autor == libro.autor ){\r\n               puedo= true;\r\n            }else{\r\n               \r\n                return false;\r\n            }\r\n        }\r\n\r\n        if(this.state.genero !=''){\r\n            if( this.state.genero == libro.genero ){\r\n               puedo= true;\r\n            }else{\r\n                \r\n                return false;\r\n            }\r\n        }\r\n        if(this.state.editorial !=''){\r\n            if( this.state.editorial == libro.editorial ){\r\n               puedo=true;\r\n            }else{\r\n               \r\n                return false;\r\n            }\r\n        }\r\n        return puedo;\r\n    }\r\n\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(this.state.buscador);\r\n        console.log(this.state.genero);\r\n        console.log(this.state.editorial);\r\n        console.log(this.state.autor);\r\n        console.log(this.state.libros);\r\n        var lib=[];\r\n        this.state.libros.map(libro => {\r\n            console.log('entra en el map');\r\n            if(this.loPuedoAgregar(libro)){\r\n                lib.push(libro);\r\n                console.log('entra');\r\n                console.log(this.loPuedoAgregar(libro));\r\n            }\r\n\r\n        });\r\n        \r\n        this.setState({\r\n            librosConFiltro:lib\r\n        });\r\n        if(lib.length === 0){\r\n            alert('no existen libros que coincidan con los filtros puestos')\r\n        }\r\n        console.log(this.state.librosConFiltro);\r\n\r\n\r\n        this.setLibrosConFiltro(lib);\r\n       \r\n    }\r\n   \r\n    limpiar=(e)=>{\r\n        var copia = this.state.autores;\r\n     \r\n        this.setState({\r\n            librosConFiltro:this.state.libros,\r\n            autor:'',\r\n            buscador:'',\r\n            editorial:'',\r\n            genero:'',\r\n           \r\n            borrar:true,\r\n\r\n           \r\n           \r\n          \r\n        });\r\n        \r\n       \r\n       \r\n        console.log('se esta limpiando');\r\n        this.render();\r\n       \r\n       \r\n\r\n\r\n    }\r\n  \r\n    render() {\r\n        const settings = {\r\n            dots: true,\r\n            infinite: true,\r\n            speed: 500,\r\n            slidesToShow: 3,\r\n            slidesToScroll: 1,\r\n            className: 'slides'\r\n\r\n        };\r\n\r\n        return (\r\n            <div> \r\n            <div className=\"col-md-8 offset-md-2\">\r\n                <form  onSubmit={this.onSubmit}>\r\n                    <div className=\"itemBuscador\">\r\n                        <input \r\n                            className=\"form-control\" \r\n                            id=\"exampleFormControlInput1\" \r\n                            name =\"buscador\"\r\n                            onChange={this.onInputChange}\r\n                            value={this.state.buscador}\r\n                            placeholder=\"Buscador\"\r\n                            >\r\n                        </input>\r\n                    </div>\r\n                    \r\n                    <div className=\"itemBuscador\">   \r\n                        <select className=\"form-control\"   \r\n                            onChange={this.onInputChange} \r\n                            id=\"exampleFormControlSelect1\" \r\n                            name=\"autor\"\r\n                            value={this.state.autor} \r\n                            >    \r\n                        <option value=\"\" selected>Autor/a</option>\r\n                        {this.state.autores.map(autor =>\r\n                        <option key={autor._id} value={autor._id} >{autor.nombre} {autor.apellido}</option>\r\n                                )}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"itemBuscador\">\r\n                    \r\n                            <select className=\"form-control\" value={this.state.genero}  onChange={this.onInputChange}  id=\"exampleFormControlSelect1\" name=\"genero\" >\r\n                            <option  value=\"\" >GÃ©nero</option>\r\n                                {this.state.generos.map(ge =>\r\n                                <option key={ge._id} value={ge._id} >{ge.nombre}</option>\r\n                                )}\r\n                            </select>\r\n                    </div>\r\n\r\n                    <div className=\"itemBuscador\">\r\n                        \r\n                            <select className=\"form-control\"\r\n                            onChange={this.onInputChange} id=\"exampleFormControlSelect1\" \r\n                            name=\"editorial\" value={this.state.editorial} >\r\n                            <option  value=\"\" >Editorial</option>\r\n                            {this.state.editoriales.map(ed =>\r\n                            <option key={ed.id} value={ed._id} >{ed.nombre}</option>\r\n                            )}\r\n                            </select>\r\n                    </div>\r\n\r\n                    <button type =\"submit\" className=\"btn btn-light itemBoton  \"> \r\n                        <svg class=\"bi bi-search\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" d=\"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\"/>\r\n                        <path fill-rule=\"evenodd\" d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"/>\r\n                        </svg>\r\n                    </button>    \r\n                    <button onClick={this.limpiar} className=\"btn btn-light itemBoton \"> \r\n                    \r\n                        <svg class=\"bi bi-backspace\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" d=\"M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z\"/>\r\n                        <path fill-rule=\"evenodd\" d=\"M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z\"/>\r\n                        <path fill-rule=\"evenodd\" d=\"M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z\"/>\r\n                        </svg>\r\n                    \r\n                     </button>         \r\n\r\n                </form>\r\n\r\n                </div>\r\n                              \r\n                                   \r\n                   <div className=\"carrusel\">\r\n                      <Slider {...settings} >\r\n\r\n                           {this.state.librosConFiltro.map(libro => \r\n                                 <div className=\"container-VerLibro\">\r\n                               \r\n                               \r\n                                 <div className=\"box\" >\r\n                                     <Link className=\"imgBx\"   to={'/suscriptor/libros/' +libro._id} >\r\n                                         <img src={portada + libro.portada} />\r\n                                     </Link>\r\n                                     <span className=\"content\">\r\n                                         <span >\r\n                                             <br></br>\r\n                                             <h2 className=\"titulo\"> {libro.titulo} </h2>\r\n                                            \r\n                                             \r\n                                         </span>\r\n                                     </span>\r\n                             \r\n                                 </div>\r\n                                 \r\n\r\n                         </div>\r\n                         \r\n                          )} \r\n\r\n                             \r\n                       \r\n                      </Slider>\r\n                  </div>\r\n\r\n                   \r\n\r\n                   \r\n                </div>               \r\n                \r\n                \r\n            \r\n        )\r\n    }\r\n};\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}