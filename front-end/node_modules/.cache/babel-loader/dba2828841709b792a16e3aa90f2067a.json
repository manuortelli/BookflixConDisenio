{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bf\\\\front-end\\\\src\\\\components\\\\VistaSuscriptor\\\\Libros\\\\Buscador.js\";\nimport React, { Component } from \"react\";\nimport axios from \"../../../../node_modules/axios\";\nimport Slider from \"react-slick\";\nimport { Link } from \"react-router-dom\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nconst portada = \"http://localhost:4000/uploads/\";\nconst autores = \"http://localhost:4000/api/autores/\";\nconst generos = \"http://localhost:4000/api/generos/\";\nconst editoriales = \"http://localhost:4000/api/editoriales/\";\nconst libros = \"http://localhost:4000/api/libros/\";\nexport default class Buscador extends Component {\n  constructor(props) {\n    super(props);\n\n    this.filtrarFechas = libros => {\n      var hoy = new Date();\n      var res = [];\n      libros.map(lib => {\n        if (lib.lanzamiento != null) {\n          var lan = new Date(lib.lanzamiento);\n\n          if (lan < hoy) {\n            if (lib.expiracion != null) {\n              var ven = new Date(lib.expiracion);\n\n              if (ven > hoy) {\n                if (libro.archivo != \"\") {\n                  if (libro.capitulos.length > 0) {\n                    res.push(lib);\n                  }\n                } //res.push(lib);\n\n              }\n            } else {\n              if (libro.archivo != \"\") {\n                if (libro.capitulos.length > 0) {\n                  res.push(lib);\n                }\n              } //res.push(lib);\n\n            }\n          }\n        } else {\n          if (lib.capitulos != []) {\n            if (libro.archivo != \"\") {\n              if (libro.capitulos.length > 0) {\n                res.push(lib);\n              }\n            } //res.push(lib);\n\n          }\n        }\n      });\n      /*\r\n      var soloArchivos = [];\r\n      res.map((libro) => {\r\n      console.log(libro.archivo != \"\");\r\n      if (libro.archivo != \"\") {\r\n      if (libro.capitulos.length > 0) {\r\n        soloArchivos.push(libro);\r\n      }\r\n      }\r\n      });*/\n\n      return res;\n    };\n\n    this.getData = async () => {\n      await axios.get(libros, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setLibros(res.data);\n      }).catch();\n      await axios.get(autores, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setAutores(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      await axios.get(generos, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setGeneros(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      await axios.get(editoriales, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setEditoriales(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.loPuedoAgregar = libro => {\n      var puedo = true;\n\n      if (this.state.buscador != \"\") {\n        var resultado = libro.titulo.toLowerCase().indexOf(this.state.buscador.toLowerCase());\n\n        if (resultado != -1) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.autor != \"\") {\n        if (this.state.autor == libro.autor) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.genero != \"\") {\n        if (this.state.genero == libro.genero) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.editorial != \"\") {\n        if (this.state.editorial == libro.editorial) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      return puedo;\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      var lib = [];\n      this.state.libros.map(libro => {\n        if (this.loPuedoAgregar(libro)) {\n          lib.push(libro);\n        }\n      });\n      this.setState({\n        librosConFiltro: lib\n      });\n\n      if (lib.length === 0) {\n        alert(\"No existen libros que coincidan con los filtros puestos\");\n      }\n\n      this.setLibrosConFiltro(lib);\n    };\n\n    this.limpiar = e => {\n      var copia = this.state.autores;\n      this.setState({\n        librosConFiltro: this.state.libros,\n        autor: \"\",\n        buscador: \"\",\n        editorial: \"\",\n        genero: \"\",\n        borrar: true\n      });\n      this.render();\n    };\n\n    this.state = {\n      token: sessionStorage.getItem(\"token\"),\n      buscador: \"\",\n      autor: \"\",\n      genero: \"\",\n      editorial: \"\",\n      libros: [],\n      autores: [],\n      generos: [],\n      editoriales: [],\n      librosConFiltro: [],\n      LibrosCarrousel: [],\n      borrar: false\n    };\n    this.loPuedoAgregar = this.loPuedoAgregar.bind(this);\n  }\n\n  setAutores(res) {\n    this.setState({\n      autores: res\n    });\n  }\n\n  setGeneros(res) {\n    this.setState({\n      generos: res\n    });\n  }\n\n  setEditoriales(res) {\n    this.setState({\n      editoriales: res\n    });\n  }\n\n  setLibros(res) {\n    console.log(\"lista de libros\");\n    var re = this.filtrarFechas(res);\n    console.log(\"res:\", re);\n    this.setState({\n      libros: re,\n      librosConFiltro: re\n    });\n    this.setLibrosConFiltro(re);\n  }\n\n  setLibrosConFiltro(res) {\n    var num = 2;\n    var aux = [];\n    var aux2 = [];\n    res.map(libro => {\n      if (aux.length < num) {\n        aux.push(libro);\n      } else {\n        aux.push(libro);\n        aux2.unshift(aux);\n        aux = [];\n      }\n    });\n\n    if (aux != []) {\n      aux2.unshift(aux);\n    }\n\n    this.setState({\n      LibrosCarrousel: aux2\n    });\n  }\n\n  async componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const settings = {\n      dots: true,\n      infinite: false,\n      speed: 500,\n      slidesToShow: 3,\n      slidesToScroll: 1,\n      className: \"slides\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 offset-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"exampleFormControlInput1\",\n      name: \"buscador\",\n      onChange: this.onInputChange,\n      value: this.state.buscador,\n      placeholder: \"Buscar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"autor\",\n      value: this.state.autor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }\n    }, \"Autor/a\"), this.state.autores.map(autor => /*#__PURE__*/React.createElement(\"option\", {\n      key: autor._id,\n      value: autor._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 19\n      }\n    }, autor.nombre, \" \", autor.apellido)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: this.state.genero,\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"genero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }\n    }, \"G\\xE9nero\"), this.state.generos.map(ge => /*#__PURE__*/React.createElement(\"option\", {\n      key: ge._id,\n      value: ge._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 19\n      }\n    }, ge.nombre)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"editorial\",\n      value: this.state.editorial,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }\n    }, \"Editorial\"), this.state.editoriales.map(ed => /*#__PURE__*/React.createElement(\"option\", {\n      key: ed.id,\n      value: ed._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 19\n      }\n    }, ed.nombre)))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-light itemBoton  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-search\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.limpiar,\n      className: \"btn btn-light itemBoton \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-backspace\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carrusel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }\n    }), this.state.librosConFiltro.map(libro => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-VerLibro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"imgBx\",\n      to: \"/suscriptor/libros/\" + libro._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: portada + libro.portada,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"titulo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 23\n      }\n    }, \" \", libro.titulo, \" \")))))))));\n  }\n\n}","map":{"version":3,"sources":["D:/Documentos/GitHub/bf/front-end/src/components/VistaSuscriptor/Libros/Buscador.js"],"names":["React","Component","axios","Slider","Link","portada","autores","generos","editoriales","libros","Buscador","constructor","props","filtrarFechas","hoy","Date","res","map","lib","lanzamiento","lan","expiracion","ven","libro","archivo","capitulos","length","push","getData","get","headers","xaccess","state","token","then","setLibros","data","catch","setAutores","err","console","log","setGeneros","setEditoriales","onInputChange","e","setState","target","name","value","loPuedoAgregar","puedo","buscador","resultado","titulo","toLowerCase","indexOf","autor","genero","editorial","onSubmit","preventDefault","librosConFiltro","alert","setLibrosConFiltro","limpiar","copia","borrar","render","sessionStorage","getItem","LibrosCarrousel","bind","re","num","aux","aux2","unshift","componentDidMount","settings","dots","infinite","speed","slidesToShow","slidesToScroll","className","_id","nombre","apellido","ge","ed","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"../../../../node_modules/axios\";\r\nimport Slider from \"react-slick\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nconst portada = \"http://localhost:4000/uploads/\";\r\nconst autores = \"http://localhost:4000/api/autores/\";\r\nconst generos = \"http://localhost:4000/api/generos/\";\r\nconst editoriales = \"http://localhost:4000/api/editoriales/\";\r\nconst libros = \"http://localhost:4000/api/libros/\";\r\n\r\nexport default class Buscador extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: sessionStorage.getItem(\"token\"),\r\n\r\n      buscador: \"\",\r\n      autor: \"\",\r\n      genero: \"\",\r\n      editorial: \"\",\r\n\r\n      libros: [],\r\n      autores: [],\r\n      generos: [],\r\n      editoriales: [],\r\n\r\n      librosConFiltro: [],\r\n      LibrosCarrousel: [],\r\n      borrar: false,\r\n    };\r\n    this.loPuedoAgregar = this.loPuedoAgregar.bind(this);\r\n  }\r\n  setAutores(res) {\r\n    this.setState({\r\n      autores: res,\r\n    });\r\n  }\r\n  setGeneros(res) {\r\n    this.setState({\r\n      generos: res,\r\n    });\r\n  }\r\n\r\n  setEditoriales(res) {\r\n    this.setState({\r\n      editoriales: res,\r\n    });\r\n  }\r\n\r\n  filtrarFechas = (libros) => {\r\n    var hoy = new Date();\r\n\r\n    var res = [];\r\n\r\n    libros.map((lib) => {\r\n      if (lib.lanzamiento != null) {\r\n        var lan = new Date(lib.lanzamiento);\r\n\r\n        if (lan < hoy) {\r\n          if (lib.expiracion != null) {\r\n            var ven = new Date(lib.expiracion);\r\n            if (ven > hoy) {\r\n              if (libro.archivo != \"\") {\r\n                if (libro.capitulos.length > 0) {\r\n                  res.push(lib);\r\n                }\r\n              }\r\n              //res.push(lib);\r\n            }\r\n          } else {\r\n            if (libro.archivo != \"\") {\r\n              if (libro.capitulos.length > 0) {\r\n                res.push(lib);\r\n              }\r\n            } //res.push(lib);\r\n          }\r\n        }\r\n      } else {\r\n        if (lib.capitulos != []) {\r\n          if (libro.archivo != \"\") {\r\n            if (libro.capitulos.length > 0) {\r\n              res.push(lib);\r\n            }\r\n          } //res.push(lib);\r\n        }\r\n      }\r\n    }); /*\r\n    var soloArchivos = [];\r\n    res.map((libro) => {\r\n      console.log(libro.archivo != \"\");\r\n      if (libro.archivo != \"\") {\r\n        if (libro.capitulos.length > 0) {\r\n          soloArchivos.push(libro);\r\n        }\r\n      }\r\n    });*/\r\n    return res;\r\n  };\r\n\r\n  setLibros(res) {\r\n    console.log(\"lista de libros\");\r\n    var re = this.filtrarFechas(res);\r\n\r\n    console.log(\"res:\", re);\r\n    this.setState({\r\n      libros: re,\r\n      librosConFiltro: re,\r\n    });\r\n    this.setLibrosConFiltro(re);\r\n  }\r\n  setLibrosConFiltro(res) {\r\n    var num = 2;\r\n    var aux = [];\r\n    var aux2 = [];\r\n\r\n    res.map((libro) => {\r\n      if (aux.length < num) {\r\n        aux.push(libro);\r\n      } else {\r\n        aux.push(libro);\r\n        aux2.unshift(aux);\r\n        aux = [];\r\n      }\r\n    });\r\n    if (aux != []) {\r\n      aux2.unshift(aux);\r\n    }\r\n    this.setState({\r\n      LibrosCarrousel: aux2,\r\n    });\r\n  }\r\n\r\n  getData = async () => {\r\n    await axios\r\n      .get(libros, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setLibros(res.data);\r\n      })\r\n      .catch();\r\n\r\n    await axios\r\n      .get(autores, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setAutores(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    await axios\r\n      .get(generos, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setGeneros(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    await axios\r\n      .get(editoriales, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setEditoriales(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  onInputChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  loPuedoAgregar = (libro) => {\r\n    var puedo = true;\r\n\r\n    if (this.state.buscador != \"\") {\r\n      var resultado = libro.titulo\r\n        .toLowerCase()\r\n        .indexOf(this.state.buscador.toLowerCase());\r\n\r\n      if (resultado != -1) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this.state.autor != \"\") {\r\n      if (this.state.autor == libro.autor) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this.state.genero != \"\") {\r\n      if (this.state.genero == libro.genero) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    if (this.state.editorial != \"\") {\r\n      if (this.state.editorial == libro.editorial) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return puedo;\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    var lib = [];\r\n\r\n    this.state.libros.map((libro) => {\r\n      if (this.loPuedoAgregar(libro)) {\r\n        lib.push(libro);\r\n      }\r\n    });\r\n\r\n    this.setState({\r\n      librosConFiltro: lib,\r\n    });\r\n    if (lib.length === 0) {\r\n      alert(\"No existen libros que coincidan con los filtros puestos\");\r\n    }\r\n\r\n    this.setLibrosConFiltro(lib);\r\n  };\r\n\r\n  limpiar = (e) => {\r\n    var copia = this.state.autores;\r\n\r\n    this.setState({\r\n      librosConFiltro: this.state.libros,\r\n      autor: \"\",\r\n      buscador: \"\",\r\n      editorial: \"\",\r\n      genero: \"\",\r\n\r\n      borrar: true,\r\n    });\r\n\r\n    this.render();\r\n  };\r\n\r\n  render() {\r\n    const settings = {\r\n      dots: true,\r\n\r\n      infinite: false,\r\n      speed: 500,\r\n      slidesToShow: 3,\r\n      slidesToScroll: 1,\r\n      className: \"slides\",\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          <form onSubmit={this.onSubmit}>\r\n            <div className=\"itemBuscador\">\r\n              <input\r\n                className=\"form-control\"\r\n                id=\"exampleFormControlInput1\"\r\n                name=\"buscador\"\r\n                onChange={this.onInputChange}\r\n                value={this.state.buscador}\r\n                placeholder=\"Buscar\"\r\n              ></input>\r\n            </div>\r\n\r\n            <div className=\"itemBuscador\">\r\n              <select\r\n                className=\"form-control\"\r\n                onChange={this.onInputChange}\r\n                id=\"exampleFormControlSelect1\"\r\n                name=\"autor\"\r\n                value={this.state.autor}\r\n              >\r\n                <option value=\"\" selected>\r\n                  Autor/a\r\n                </option>\r\n                {this.state.autores.map((autor) => (\r\n                  <option key={autor._id} value={autor._id}>\r\n                    {autor.nombre} {autor.apellido}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"itemBuscador\">\r\n              <select\r\n                className=\"form-control\"\r\n                value={this.state.genero}\r\n                onChange={this.onInputChange}\r\n                id=\"exampleFormControlSelect1\"\r\n                name=\"genero\"\r\n              >\r\n                <option value=\"\">GÃ©nero</option>\r\n                {this.state.generos.map((ge) => (\r\n                  <option key={ge._id} value={ge._id}>\r\n                    {ge.nombre}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"itemBuscador\">\r\n              <select\r\n                className=\"form-control\"\r\n                onChange={this.onInputChange}\r\n                id=\"exampleFormControlSelect1\"\r\n                name=\"editorial\"\r\n                value={this.state.editorial}\r\n              >\r\n                <option value=\"\">Editorial</option>\r\n                {this.state.editoriales.map((ed) => (\r\n                  <option key={ed.id} value={ed._id}>\r\n                    {ed.nombre}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-light itemBoton  \">\r\n              <svg\r\n                class=\"bi bi-search\"\r\n                width=\"1em\"\r\n                height=\"1em\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"currentColor\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"\r\n                />\r\n              </svg>\r\n            </button>\r\n            <button onClick={this.limpiar} className=\"btn btn-light itemBoton \">\r\n              <svg\r\n                class=\"bi bi-backspace\"\r\n                width=\"1em\"\r\n                height=\"1em\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"currentColor\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"carrusel\">\r\n          <Slider {...settings}>\r\n            {this.state.librosConFiltro.map((libro) => (\r\n              <div className=\"container-VerLibro\">\r\n                <div className=\"box\">\r\n                  <Link\r\n                    className=\"imgBx\"\r\n                    to={\"/suscriptor/libros/\" + libro._id}\r\n                  >\r\n                    <img src={portada + libro.portada} />\r\n                  </Link>\r\n                  <span className=\"content\">\r\n                    <span>\r\n                      <br></br>\r\n                      <h2 className=\"titulo\"> {libro.titulo} </h2>\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </Slider>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}